<Window x:Class="Throughput.Windows.MainAppWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Throughput - Network Dashboard"
        Width="480" Height="600"
        MinWidth="350" MinHeight="450"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        Foreground="White"
        ResizeMode="CanResizeWithGrip">
    
    <Window.Resources>
        <!-- Primary Button Style -->
        <Style x:Key="PrimaryButton" TargetType="Button">
            <Setter Property="Background" Value="#3b82f6"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Padding" Value="16,10"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" 
                                Background="{TemplateBinding Background}" 
                                CornerRadius="10"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#2563eb"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="border" Property="Background" Value="#374151"/>
                                <Setter Property="Foreground" Value="#6b7280"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    
    <!-- Main container with transparent background -->
    <Border Background="#C0080810" CornerRadius="12"
            MouseLeftButtonDown="Window_MouseLeftButtonDown">
        
        <!-- Use Viewbox to scale content proportionally -->
        <Viewbox Stretch="Uniform" StretchDirection="Both">
            <Grid Width="440" Margin="20,16">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <!-- WINDOW CONTROLS -->
                <Grid Grid.Row="0" Margin="0,0,0,8">
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                        <TextBlock Text="â”€" 
                                   FontSize="14" 
                                   Foreground="#6b7280"
                                   Cursor="Hand"
                                   Margin="0,0,16,0"
                                   MouseLeftButtonDown="MinimizeButton_Click"
                                   ToolTip="Minimize"/>
                        <TextBlock Text="âœ•" 
                                   FontSize="14" 
                                   Foreground="#6b7280"
                                   Cursor="Hand"
                                   MouseLeftButtonDown="CloseButton_Click"
                                   ToolTip="Close"/>
                    </StackPanel>
                </Grid>
                
                <!-- HEADER -->
                <StackPanel Grid.Row="1" Margin="0,0,0,16" HorizontalAlignment="Left">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="âš¡" FontSize="26" VerticalAlignment="Center" Margin="0,0,4,0"/>
                        <TextBlock Text="Throughput" 
                                   FontSize="26" 
                                   FontWeight="Bold"
                                   Foreground="#60A5FA"
                                   VerticalAlignment="Center"/>
                    </StackPanel>
                    <TextBlock Text="Network Speed Monitor" 
                               FontSize="10" 
                               Foreground="#6b7280"
                               Margin="0,2,0,0"/>
                </StackPanel>
                
                <!-- LIVE NETWORK SPEED CARD -->
                <Border Grid.Row="2" Background="#1a1a2e" CornerRadius="12" Padding="16" Margin="0,0,0,12">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                            <TextBlock Text="ðŸ“Š" FontSize="12" VerticalAlignment="Center"/>
                            <TextBlock Text=" Live Network Speed" 
                                       FontSize="11" 
                                       FontWeight="SemiBold"
                                       Foreground="White"
                                       VerticalAlignment="Center"/>
                            <TextBlock Text="  â€¢  Updates every second" 
                                       FontSize="9" 
                                       Foreground="#6b7280"
                                       VerticalAlignment="Center"/>
                        </StackPanel>
                        
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="16"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <!-- Download -->
                            <Border Grid.Column="0" Background="#252542" CornerRadius="10" Padding="12,10">
                                <StackPanel HorizontalAlignment="Center">
                                    <Border Background="#134e3a" CornerRadius="50" Width="40" Height="40" HorizontalAlignment="Center">
                                        <TextBlock Text="â†“" FontSize="20" Foreground="#4ADE80" 
                                                   HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Border>
                                    <TextBlock x:Name="LiveDownloadSpeed" 
                                               Text="0 KB/s" 
                                               FontSize="14" 
                                               FontWeight="Bold"
                                               Foreground="#4ADE80"
                                               HorizontalAlignment="Center"
                                               Margin="0,6,0,0"/>
                                    <TextBlock Text="Download" 
                                               FontSize="9" 
                                               Foreground="#9ca3af"
                                               HorizontalAlignment="Center"/>
                                </StackPanel>
                            </Border>
                            
                            <!-- Upload -->
                            <Border Grid.Column="2" Background="#252542" CornerRadius="10" Padding="12,10">
                                <StackPanel HorizontalAlignment="Center">
                                    <Border Background="#4a1942" CornerRadius="50" Width="40" Height="40" HorizontalAlignment="Center">
                                        <TextBlock Text="â†‘" FontSize="20" Foreground="#F472B6" 
                                                   HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Border>
                                    <TextBlock x:Name="LiveUploadSpeed" 
                                               Text="0 KB/s" 
                                               FontSize="14" 
                                               FontWeight="Bold"
                                               Foreground="#F472B6"
                                               HorizontalAlignment="Center"
                                               Margin="0,6,0,0"/>
                                    <TextBlock Text="Upload" 
                                               FontSize="9" 
                                               Foreground="#9ca3af"
                                               HorizontalAlignment="Center"/>
                                </StackPanel>
                            </Border>
                        </Grid>
                    </StackPanel>
                </Border>
                
                <!-- SPEED TEST CARD -->
                <Border Grid.Row="3" Background="#1a1a2e" CornerRadius="12" Padding="16" Margin="0,0,0,12">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                            <TextBlock Text="ðŸš€" FontSize="12" VerticalAlignment="Center"/>
                            <TextBlock Text=" Internet Speed Test" 
                                       FontSize="11" 
                                       FontWeight="SemiBold"
                                       Foreground="White"
                                       VerticalAlignment="Center"/>
                        </StackPanel>
                        
                        <Button x:Name="SpeedTestButton" 
                                Content="âš¡ Test My Internet Speed"
                                Style="{StaticResource PrimaryButton}"
                                HorizontalAlignment="Stretch"
                                Click="SpeedTestButton_Click"/>
                        
                        <ProgressBar x:Name="TestProgressBar"
                                     Height="4"
                                     Margin="0,10,0,0"
                                     Background="#252542"
                                     Foreground="#3b82f6"
                                     Visibility="Collapsed"/>
                        
                        <TextBlock x:Name="TestStatusText"
                                   Text="Measure your maximum internet bandwidth"
                                   FontSize="9"
                                   Foreground="#9ca3af"
                                   HorizontalAlignment="Center"
                                   Margin="0,8,0,0"/>
                        
                        <!-- Results Grid -->
                        <Grid x:Name="ResultsGrid" 
                              Margin="0,12,0,0"
                              Visibility="Collapsed">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <!-- Download Result -->
                            <StackPanel Grid.Column="0" HorizontalAlignment="Center">
                                <Border Background="#134e3a" CornerRadius="6" Padding="8,6" HorizontalAlignment="Center">
                                    <TextBlock Text="â†“" FontSize="14" Foreground="#4ADE80" HorizontalAlignment="Center"/>
                                </Border>
                                <TextBlock x:Name="ResultDownload" 
                                           Text="--" 
                                           FontSize="18" 
                                           FontWeight="Bold"
                                           Foreground="White"
                                           HorizontalAlignment="Center"
                                           Margin="0,4,0,0"/>
                                <TextBlock Text="Mbps" FontSize="9" Foreground="#9ca3af" HorizontalAlignment="Center"/>
                                <TextBlock x:Name="ResultDownloadMB" 
                                           Text="" 
                                           FontSize="8" 
                                           Foreground="#6b7280" 
                                           HorizontalAlignment="Center"/>
                            </StackPanel>
                            
                            <!-- Upload Result -->
                            <StackPanel Grid.Column="1" HorizontalAlignment="Center">
                                <Border Background="#4a1942" CornerRadius="6" Padding="8,6" HorizontalAlignment="Center">
                                    <TextBlock Text="â†‘" FontSize="14" Foreground="#F472B6" HorizontalAlignment="Center"/>
                                </Border>
                                <TextBlock x:Name="ResultUpload" 
                                           Text="--" 
                                           FontSize="18" 
                                           FontWeight="Bold"
                                           Foreground="White"
                                           HorizontalAlignment="Center"
                                           Margin="0,4,0,0"/>
                                <TextBlock Text="Mbps" FontSize="9" Foreground="#9ca3af" HorizontalAlignment="Center"/>
                                <TextBlock x:Name="ResultUploadMB" 
                                           Text="" 
                                           FontSize="8" 
                                           Foreground="#6b7280" 
                                           HorizontalAlignment="Center"/>
                            </StackPanel>
                            
                            <!-- Latency Result -->
                            <StackPanel Grid.Column="2" HorizontalAlignment="Center">
                                <Border Background="#4a4a19" CornerRadius="6" Padding="8,6" HorizontalAlignment="Center">
                                    <TextBlock Text="â±" FontSize="14" Foreground="#FBBF24" HorizontalAlignment="Center"/>
                                </Border>
                                <TextBlock x:Name="ResultLatency" 
                                           Text="--" 
                                           FontSize="18" 
                                           FontWeight="Bold"
                                           Foreground="White"
                                           HorizontalAlignment="Center"
                                           Margin="0,4,0,0"/>
                                <TextBlock Text="ms" FontSize="9" Foreground="#9ca3af" HorizontalAlignment="Center"/>
                                <TextBlock Text="Ping" 
                                           FontSize="8" 
                                           Foreground="#6b7280" 
                                           HorizontalAlignment="Center"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Border>
                
                <!-- WIDGET STYLE SELECTOR -->
                <Border Grid.Row="4" Background="#1a1a2e" CornerRadius="12" Padding="16" Margin="0,0,0,12">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                            <TextBlock Text="ðŸŽ¨" FontSize="12" VerticalAlignment="Center"/>
                            <TextBlock Text=" Widget Style" 
                                       FontSize="11" 
                                       FontWeight="SemiBold"
                                       Foreground="White"
                                       VerticalAlignment="Center"/>
                            <TextBlock Text="  â€¢  Click to switch &amp; save" 
                                       FontSize="9" 
                                       Foreground="#6b7280"
                                       VerticalAlignment="Center"/>
                        </StackPanel>
                        
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            
                            <!-- Full Widget -->
                            <RadioButton x:Name="FullWidgetRadio" 
                                         Grid.Row="0" Grid.Column="0"
                                         GroupName="WidgetStyle"
                                         Tag="Full"
                                         Checked="WidgetRadio_Checked"
                                         Margin="0,0,6,6"
                                         Cursor="Hand">
                                <RadioButton.Template>
                                    <ControlTemplate TargetType="RadioButton">
                                        <Border x:Name="border" Background="#252542" CornerRadius="8" Padding="10,8">
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text="âš¡" FontSize="14" VerticalAlignment="Center" Margin="0,0,6,0"/>
                                                <StackPanel>
                                                    <TextBlock Text="Full" FontSize="10" FontWeight="SemiBold" Foreground="White"/>
                                                    <TextBlock Text="Header + Speeds" FontSize="8" Foreground="#6b7280"/>
                                                </StackPanel>
                                            </StackPanel>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsChecked" Value="True">
                                                <Setter TargetName="border" Property="Background" Value="#3b82f6"/>
                                            </Trigger>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter TargetName="border" Property="BorderBrush" Value="#60A5FA"/>
                                                <Setter TargetName="border" Property="BorderThickness" Value="1"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </RadioButton.Template>
                            </RadioButton>
                            
                            <!-- Compact Widget -->
                            <RadioButton x:Name="CompactWidgetRadio" 
                                         Grid.Row="0" Grid.Column="1"
                                         GroupName="WidgetStyle"
                                         Tag="Compact"
                                         Checked="WidgetRadio_Checked"
                                         Margin="6,0,0,6"
                                         Cursor="Hand">
                                <RadioButton.Template>
                                    <ControlTemplate TargetType="RadioButton">
                                        <Border x:Name="border" Background="#252542" CornerRadius="8" Padding="10,8">
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text="â†•" FontSize="14" Foreground="#4ADE80" VerticalAlignment="Center" Margin="0,0,6,0"/>
                                                <StackPanel>
                                                    <TextBlock Text="Compact" FontSize="10" FontWeight="SemiBold" Foreground="White"/>
                                                    <TextBlock Text="â†“ â†‘ Only" FontSize="8" Foreground="#6b7280"/>
                                                </StackPanel>
                                            </StackPanel>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsChecked" Value="True">
                                                <Setter TargetName="border" Property="Background" Value="#3b82f6"/>
                                            </Trigger>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter TargetName="border" Property="BorderBrush" Value="#60A5FA"/>
                                                <Setter TargetName="border" Property="BorderThickness" Value="1"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </RadioButton.Template>
                            </RadioButton>
                            
                            <!-- Minimal Widget -->
                            <RadioButton x:Name="MinimalWidgetRadio" 
                                         Grid.Row="1" Grid.Column="0"
                                         GroupName="WidgetStyle"
                                         Tag="Minimal"
                                         Checked="WidgetRadio_Checked"
                                         Margin="0,6,6,0"
                                         Cursor="Hand">
                                <RadioButton.Template>
                                    <ControlTemplate TargetType="RadioButton">
                                        <Border x:Name="border" Background="#252542" CornerRadius="8" Padding="10,8">
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text="â†“" FontSize="14" Foreground="#4ADE80" VerticalAlignment="Center" Margin="0,0,6,0"/>
                                                <StackPanel>
                                                    <TextBlock Text="Minimal" FontSize="10" FontWeight="SemiBold" Foreground="White"/>
                                                    <TextBlock Text="Tiny Download" FontSize="8" Foreground="#6b7280"/>
                                                </StackPanel>
                                            </StackPanel>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsChecked" Value="True">
                                                <Setter TargetName="border" Property="Background" Value="#3b82f6"/>
                                            </Trigger>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter TargetName="border" Property="BorderBrush" Value="#60A5FA"/>
                                                <Setter TargetName="border" Property="BorderThickness" Value="1"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </RadioButton.Template>
                            </RadioButton>
                            
                            <!-- Speed Test Widget -->
                            <RadioButton x:Name="SpeedTestWidgetRadio" 
                                         Grid.Row="1" Grid.Column="1"
                                         GroupName="WidgetStyle"
                                         Tag="SpeedTest"
                                         Checked="WidgetRadio_Checked"
                                         Margin="6,6,0,0"
                                         Cursor="Hand">
                                <RadioButton.Template>
                                    <ControlTemplate TargetType="RadioButton">
                                        <Border x:Name="border" Background="#252542" CornerRadius="8" Padding="10,8">
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text="ðŸš€" FontSize="14" VerticalAlignment="Center" Margin="0,0,6,0"/>
                                                <StackPanel>
                                                    <TextBlock Text="Speed Test" FontSize="10" FontWeight="SemiBold" Foreground="White"/>
                                                    <TextBlock Text="Test Focused" FontSize="8" Foreground="#6b7280"/>
                                                </StackPanel>
                                            </StackPanel>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsChecked" Value="True">
                                                <Setter TargetName="border" Property="Background" Value="#3b82f6"/>
                                            </Trigger>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter TargetName="border" Property="BorderBrush" Value="#60A5FA"/>
                                                <Setter TargetName="border" Property="BorderThickness" Value="1"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </RadioButton.Template>
                            </RadioButton>
                        </Grid>
                    </StackPanel>
                </Border>
                
                <!-- INFO CARD -->
                <Border Grid.Row="5" Background="#0f2744" CornerRadius="10" Padding="12" Margin="0,0,0,10">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="â„¹ï¸" FontSize="12" VerticalAlignment="Center" Margin="0,0,8,0"/>
                        <TextBlock Text="Mbps = Internet speed (ISPs) â€¢ MB/s = Download speed (browsers) â€¢ 100 Mbps â‰ˆ 12.5 MB/s" 
                                   FontSize="9" 
                                   Foreground="#9ca3af"
                                   VerticalAlignment="Center"
                                   TextWrapping="Wrap"/>
                    </StackPanel>
                </Border>
                
                <!-- FOOTER -->
                <StackPanel Grid.Row="6" Orientation="Horizontal" HorizontalAlignment="Center">
                    <Border Background="#1a1a2e" CornerRadius="6" Padding="10,6" Margin="0,0,8,0">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="âœ¨" FontSize="9"/>
                            <TextBlock Text=" Crafted by "
                                       FontSize="9"
                                       Foreground="#6b7280"
                                       VerticalAlignment="Center"/>
                            <TextBlock Text="Hakkan"
                                       FontSize="9"
                                       Foreground="#60A5FA"
                                       Cursor="Hand"
                                       VerticalAlignment="Center"
                                       MouseLeftButtonDown="OpenHakkanLink_Click"
                                       ToolTip="hakkan.is-a.dev"/>
                        </StackPanel>
                    </Border>
                    
                    <Border Background="#1a1a2e" CornerRadius="6" Padding="10,6">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="ðŸ”’" FontSize="9"/>
                            <TextBlock Text=" No data collected"
                                       FontSize="9"
                                       Foreground="#6b7280"
                                       VerticalAlignment="Center"/>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </Grid>
        </Viewbox>
    </Border>
</Window>
