<Window x:Class="Throughput.Windows.SpeedTestWidget"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Throughput"
        SizeToContent="WidthAndHeight"
        WindowStyle="None"
        AllowsTransparency="True"
        Foreground="White"
        Background="Transparent"
        Topmost="True"
        ShowInTaskbar="False"
        ResizeMode="NoResize"
        Cursor="SizeAll"
        MouseLeftButtonDown="Window_MouseLeftButtonDown"
        MouseEnter="Window_MouseEnter"
        MouseLeave="Window_MouseLeave">
    
    <Window.Resources>
        <!-- Primary Button Style -->
        <Style x:Key="SpeedTestButton" TargetType="Button">
            <Setter Property="Background" Value="#3b82f6"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" 
                                Background="{TemplateBinding Background}" 
                                CornerRadius="8"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#2563eb"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="border" Property="Background" Value="#374151"/>
                                <Setter Property="Foreground" Value="#6b7280"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    
    <!-- Main Container -->
    <Border x:Name="MainBorder"
            CornerRadius="12" 
            Background="#B0050508"
            BorderBrush="#25FFFFFF"
            BorderThickness="1"
            Padding="14,10,14,12">
        <Border.Effect>
            <DropShadowEffect Color="Black" BlurRadius="12" ShadowDepth="2" Opacity="0.5"/>
        </Border.Effect>
        
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            
            <!-- Header with Close Button -->
            <Grid Grid.Row="0" Margin="0,0,0,10">
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Center">
                    <TextBlock Text="ðŸš€" FontSize="12" VerticalAlignment="Center" Margin="0,0,3,0"/>
                    <TextBlock Text="Speed Test" 
                               FontSize="12" 
                               FontWeight="SemiBold"
                               Foreground="#60A5FA"
                               VerticalAlignment="Center"/>
                </StackPanel>
                <TextBlock x:Name="CloseButton"
                           Text="âœ•" 
                           FontSize="11" 
                           Foreground="#60FFFFFF"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center"
                           Cursor="Hand"
                           Visibility="Hidden"
                           MouseLeftButtonDown="CloseButton_Click"
                           ToolTip="Close application"/>
            </Grid>
            
            <!-- Speed Test Button -->
            <Button x:Name="SpeedTestButton" 
                    Grid.Row="1"
                    Content="âš¡ Test Speed"
                    Style="{StaticResource SpeedTestButton}"
                    HorizontalAlignment="Stretch"
                    Click="SpeedTestButton_Click"/>
            
            <!-- Progress Bar -->
            <ProgressBar x:Name="TestProgressBar"
                         Grid.Row="2"
                         Height="3"
                         Margin="0,8,0,0"
                         Background="#252542"
                         Foreground="#3b82f6"
                         Visibility="Collapsed"/>
            
            <!-- Results Grid -->
            <Grid x:Name="ResultsGrid" 
                  Grid.Row="3"
                  Margin="0,10,0,0"
                  Visibility="Collapsed">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                
                <!-- Download Result -->
                <StackPanel Grid.Column="0" HorizontalAlignment="Center">
                    <TextBlock Text="â†“" FontSize="12" Foreground="#4ADE80" HorizontalAlignment="Center"/>
                    <TextBlock x:Name="ResultDownload" 
                               Text="--" 
                               FontSize="14" 
                               FontWeight="Bold"
                               Foreground="White"
                               HorizontalAlignment="Center"/>
                    <TextBlock Text="Mbps" FontSize="8" Foreground="#9ca3af" HorizontalAlignment="Center"/>
                </StackPanel>
                
                <!-- Upload Result -->
                <StackPanel Grid.Column="1" HorizontalAlignment="Center">
                    <TextBlock Text="â†‘" FontSize="12" Foreground="#F472B6" HorizontalAlignment="Center"/>
                    <TextBlock x:Name="ResultUpload" 
                               Text="--" 
                               FontSize="14" 
                               FontWeight="Bold"
                               Foreground="White"
                               HorizontalAlignment="Center"/>
                    <TextBlock Text="Mbps" FontSize="8" Foreground="#9ca3af" HorizontalAlignment="Center"/>
                </StackPanel>
                
                <!-- Latency Result -->
                <StackPanel Grid.Column="2" HorizontalAlignment="Center">
                    <TextBlock Text="â±" FontSize="12" Foreground="#FBBF24" HorizontalAlignment="Center"/>
                    <TextBlock x:Name="ResultLatency" 
                               Text="--" 
                               FontSize="14" 
                               FontWeight="Bold"
                               Foreground="White"
                               HorizontalAlignment="Center"/>
                    <TextBlock Text="ms" FontSize="8" Foreground="#9ca3af" HorizontalAlignment="Center"/>
                </StackPanel>
            </Grid>
            
            <!-- More Details Link -->
            <TextBlock Grid.Row="3"
                       x:Name="MoreDetailsLink"
                       Text="ðŸ“Š More Details" 
                       FontSize="10" 
                       Foreground="#60A5FA"
                       HorizontalAlignment="Center"
                       Margin="0,10,0,0"
                       Cursor="Hand"
                       MouseLeftButtonDown="OpenDashboard_Click"
                       ToolTip="Open dashboard"/>
        </Grid>
    </Border>
</Window>
